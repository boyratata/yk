(function(_,r,a,d,o,ui,assets,storage){const Dispatcher=r.findByProps("dispatch","subscribe");const RowManager=r.findByName("RowManager");const cache={};Dispatcher.subscribe("MESSAGE_CREATE",e=>{const m=e?.message;if(m?.id&&m?.content)cache[m.id]=m.content});Dispatcher.subscribe("MESSAGE_UPDATE",e=>{const m=e?.message;if(m?.id&&m?.content&&cache[m.id]&&cache[m.id]!==m.content)m.__oldContent=cache[m.id];cache[m.id]=m.content});const unpatch=d.after("generate",RowManager.prototype,([row],res)=>{if(row?.message?.__oldContent){res.message.content=`[Before Edit]: ${row.message.__oldContent}\n${row.message.content}`}});return{onUnload:()=>{unpatch();Object.keys(cache).forEach(k=>delete cache[k])},settings:null}})(vendetta.metro.common,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.ui.assets,vendetta.storage);
